---
layout: default
title: 数据库技术及应用
category: MOOC
---

参考教材：
数据库技术及应用（第4版）李雁翎，高等教育出版社，2014.9
数据库技术及应用实验教程—ACCESS（第4版）李雁翎，高等教育出版社，2014.8
数据库技术及应用—SQL Server（第4版）李雁翎，高等教育出版社，2014.8
数据库技术及应用—Visual FoxPro（第4版）李雁翎，高等教育出版社，2014.1

---

[TOC]

---

# Terms

|Technical terms|Chinese equivalents|
|---------------|-------------------|
|DataBase, DB|数据库|
|DataBase Management System, DBMS|数据库管理系统|
|DataBase System, DBS|数据库系统|
|Data Processing|数据处理|
|entity|实体|
|attribute|属性|
|key|码|
|domain|域|
|entity set|实体集|
|entity type|实体型|
|relationship|联系|
|relational model|关系模型|
|relation|关系|
|tuple|元组|
|componet|分量|
|relation schema|关系模式|
|entity integrity|实体完整性|
|reference integrity|参照完整性|
|user-defined integrity|用户自定义完整性|
|normal form|范式|

DDL                                 数据定义语言
DML                                 数据操纵语言
DCL                                 数据控制语言

---

## 基础理论

### 基本概念

信息
:    信息是人们对于客观事物属性和运动状态的反映。信息所反映的是关于某一客观系统中，某一事物的存在方式或某一时刻的运动状态。数据的值和型决定了数据的语义。

数据
:    数据是反映客观事物存在方式和运动状态的记录，是信息的载体。从计算机的角度看，数据泛指那些可以被计算机接受并能够被计算机处理的符号，是数据库中存储的基本对象。 

数据库
:    数据库是以一定的组织方式将相关的数据组织在一起，长期存放在计算机内，可为多个用户共享，与应用程序彼此独立，统一管理的数据集合。数据库是数据库系统的核心部分，是数据库系统的管理对象。 

数据库管理系统
:    数据库管理系统（DataBase Management System，DBMS）是位于用户与操作系统之间，具有数据定义、管理和操纵功能的软件集合。
 
数据库系统
:    数据库系统(DataBase System，DBS)是实现有组织、动态地存储大量相关的结构化数据、方便各类用户访问数据库的计算机软/硬件资源的集合。

数据处理
:    数据处理（Data Processing）是对数据的采集、整理、存储、分类、排序、检索、维护、加工、统计和传输的一系列操作。

```flow
o1=>operation: 人工管理阶段
o2=>operation: 文件系统阶段
o3=>operation: 数据库系统阶段
o4=>operation: 高级数据库系统阶段

o1(right)->o2(right)->o3(right)->o4
```

### 数据库系统

**数据库系统体系结构**

- 三级结构（数据抽象的三个级别）：外部级、概念级、内部级。
- 三级模式结构：外模式、模式和内模式。

### 数据模型

#### 数据描述

数据描述是以“数据”符号的形式，从满足用户需求出发，对客观事物属性和运动状态进行的描述。 

**三个数据范畴**

```flow
o1=>operation: 现实世界
o2=>operation: 信息世界 (概念模型)
o3=>operation: 计算机世界 (数据模型)

o1(right)->o2(right)->o3
```

#### 概念模型
 
概念模型是一种独立于计算机系统的数据模型，只是用来描绘某个特定环境下，特定系统中，特定需求对象所关心的客观存在的信息结构。概念模型通常用E-R模型、扩充的E-R模型来表示。
 
- 实体（Entity）：客观存在并可相互区别的事物。
- 属性（Attribute）：属性是指实体的特征和性质。
- 码（Key）：唯一标识实体的属性或属性集称为码。
- 域（Domain）：属性的取值范围称为属性的域。
- 实体集（Entity Set）：同类型实体的集合称为实体集。
- 实体型（Entity Type）：用实体名及其属性名集合来抽象和刻画同类的实体称为实体型。
- 联系（Relationship）：反映实体内部的联系，或实体之间的联系。

**E-R图表示法：**

- 椭圆 -> 属性
- 矩形 -> 实体型 
- 菱形 -> 联系
 
一对一联系（1:1）
一对多联系（1:n）
多对多联系（m:n） 

#### 关系模型

数据模型的要素：数据结构、数据操作、关系完整性约束。
常用的数据模型：层次模型、网状模型、关系模型、面向对象模型。

关系模型（Relational Model）：是以二维表的形式组织数据，便于利用各种客观实体与属性之间的关系进行存储和变换，不分层也无指针，是建立空间数据和属性数据之间关系的一种非常有效的数据组织方法 。

#### 数据结构
- 关系（Relation）：一张二维表称关系。
- 元组（Tuple）：表中的行称为元组。
- 属性（Attribute）：表中的列称为属性。
- 码（Key）：表中的某个属性或属性组，唯一标识一个元组称为码。
- 域（Domain）：属性的取值范围称为域。
- 分量（Componet）：元组中的一个属性值称为分量。
- 关系模式（ Relation Schema）：对关系的描述称为关系模式。

#### 数据操作
关系模型的数据操作主要有查询、插入、删除和修改等。
 
#### 关系完整性约束
- 实体完整性 (Entity Integrity)：若属性K是基本关系R的主码，则属性K不能取空值,且不能重复。
- 参照完整性 (Reference Integrity)：如果属性集K是关系模式S中的主码，K也是另一个关系模式R的外码，那么在R的关系中K的取值只允许两有两种可能，一是空值，二是S中某个元组的K值。
- 用户自定义完整性 (User-Defined Integrity)：是针对某一具体关系数据库的约束条件，反映某一具体应用所涉及的数据必须满足的语义要求。用户自定义的完整性约束通常是通过存储过程和触发器来实现的。

### 关系数据库

在关系操作中，以关系代数为理论基础的数据操纵语言（Data Manipulation Language，DML）控制关系操作。
通过集合运算可以实现数据的插入、删除、修改等操作。 

|关系代数|运算类型|相同点|不同点|
|--------|--------|------|------|
|集合运算|并、交、差、笛卡尔积|将“关系”看做是元组的集合|运算是从关系的水平方向进行的|
|关系运算|投影、选择、连接、除|将“关系”看做是元组的集合|运算不仅涉及关系的水平方向，也涉及垂直方向|

|运算|记法|前提|结果|应用|
|----|----|----|----|----|
|并|$ R\cup S = \{t\mid t\in R \lor t\in S\} $|进行并运算的关系必须具有相容性|n目关系，由属于R或属于S的元组组成|插入新元组|
|差|$ R-S = \{t\mid t\in R \land t\notin S\} $|差运算使用的关系也必须具有相容性<br>差运算是有序的|n目关系，由属于R而不属于S的所有元组组成|删除|
|交|$ R\cap S = \{t\mid t\in R \land t\in S\} $||n目关系，由既属于R又属于S的元组组成||
|笛卡尔积|$ R\times S = \{\widehat{t_r  t_s}\mid t_r\in R \land t_s\in S\} $||两个已知关系R和S，其中：<br> R：n目关系，k1个元组<br> S：m目关系，k2个元组<br> 列：（n+m）列的元组的集合。<br> 行： k1× k2个元组的集合||


投影
:    投影是选择关系R中的若干属性组成新的关系，并去掉了重复元组，是对关系的属性进行筛选。
记作: $ \pi_A(R) = \{t[A]\mid t\in R \} $
A为关系R的属性列表，各属性间用逗号分隔，属性名也可以用它的序号来代替。 
投影运算是一元关系运算，其结果往往比原有关系属性少，或改变原有关系的属性顺序，或更改原有关系的属性名等。投影运算结果不仅取消了原关系中的某些列，而且还可能取消某些元组（避免重复行）。 


选择
:    选择是根据给定的条件选择关系R中的若干元组组成新的关系，是对关系的元组进行筛选。
记作：$ \sigma F(R) = \{t\mid t\in R \land F(t)='真' \} $
其中：F是选择条件，它由逻辑运算符（∧、∨、￢）和比较运算符（＞，≥，≤，＜，＝或≠ ）组成的逻辑表达式 。

连接
:    连接是根据给定的条件，从两个已知关系R和S的笛卡尔积中，选取满足连接条件（属性之间）的若干元组组成新的关系。记作： $ R\bowtie S (_A \theta _B)= \{\widehat{t_r  t_s}\mid tr\in R \land ts\in S\land tr[A] \ \theta  \ ts[B]\} $

其中：
A、B：分别为R和S上度数相等且可比的属性组。
θ：比较运算符。
 
连接与笛卡尔积的区别是：笛卡尔积是关系R和S所有元组的组合，连接是只含满足“选择条件”元组的组合，
如果连接没有“选择条件”，则连接运算变成了笛卡尔积运算。
连接运算有条件连接、等值连接、自然连接 、外连接等。 

（1）条件连接
从两个关系的笛卡尔积中选取属性间满足一定条件的元组。
（2）等值连接
从关系R与S的笛卡尔积中选取满足等值条件的元组。
（3)自然连接
从两个关系的笛卡尔积中，选取公共属性满足等值条件的元组，但新关系不包含重复的属性。
（4）外连接
在连接条件的某一边添加一个符号“*”，其连接结果是为符号所在边添加一个全部由“空值”组成的行。
左外连接：连接条件中的符号在条件表达式的左边，它先将R中的所有元组都保留在新关系中，包括公共属性不满足等值条件的元组，新关系中与S相对应的非公共属性的值均为空。
右外连接：连接条件中的符号在条件表达式的右边，它先将S中的所有元组都保留在新关系中，包括公共属性不满足等值条件的元组，新关系中与R相对应的非公共属性的值均为空。 

除
:    


### 关系的规范化理论

数据依赖：研究数据之间的联系。
范式：关系模式的标准。
模式分解：模式设计的方法。 

函数依赖
:    当某个属性集决定另一个属性集时，称另一属性集依赖于该属性集。
函数依赖是数据依赖的一种描述形式。
 
定义1
设R(U)是一个属性集U上的关系模式，X和Y是U的子集，若对于R(U)的任意一个可能的关系r，r中不可能存在两
个元组在X上的属性值相等，而在Y上的属性值不等， 则称“X函数确定Y”或“Y函数依赖于X”，记作$X\to Y$。
即：如果属性X的值就可以决定属性Y的值，则属性Y函数依赖于属性X。 

定义2
在关系模式R(U)中，如果$X\to Y$，并且对于X的任何一个真子集X'，都有$X'\nrightarrow Y$，则称Y完全函数依赖于X，记作$X \underrightarrow {^f} Y$。否则称Y部分函数依赖于X，记作$X \underrightarrow {^p} Y$。

定义3
在关系模式R(U)中，如果X→Y，Y→Z，且$Y \nsubseteq X$，$Y\nrightarrow X$，则称Z传递函数依赖于X。

关系规范化理论是研究如何将一个不十分合理的关系模型转化为一个最佳的数据关系模型的理论，是围绕范式
而建立。

根据满足规范的条件不同，有六个范式级别：第一范式(简称1NF)，第二范式(2NF)，第三范式(3NF)，BC范式(BCNF)，第四范式(4NF)和第五范式(5NF)。

1.第一范式（1NF）
如果一个关系模式R(U)的所有属性都是不可再分的基本数据项，则称R(U)为第一范式，即R(U)∈1NF。第一范式是对关系模式的最起码的要求。不满足第一范式的数据库模式不能称为关系数据库。 

2.第二范式(2NF)
若R(U)∈1NF，且每一个非主属性完全函数依赖于某个候选键，称R(U)为第二范式，即R(U)∈2NF。 

3.第三范式(3NF)
设关系模式R(U)∈2NF，且每一个非主属性既不部分函数依赖于码，也不传递函数依赖于码，则称R(U)为第三范式，即R(U)∈3NF。 

四、模式分解
对关系模式的分解要符合“无损连接”和“保持依赖”的原则，使得分解后的关系不能破坏原来的函数依赖。保留适量冗余，达到以空间换时间的 目的，也是模式分解的重要原则。 
 1.无损连接
当对关系模式R进行分解时，R元组将分别在相应属性集进行投影而产生新的关系。如果对新关系进行自然连接得到的元组的集合与原关系完全一致，则称其为无损连接。
 2.保持依赖
当对关系R进行分解时，R的函数依赖集也将按相应的模式进行分解，如果分解后的总的函数依赖集与原函数依赖集保持不变，则称为保持函数依赖。
 
在实际的数据库设计中，不是关系规范化的等级越高就越好，具体问题还要具体分析。总之目的是设计一个性
能良好的数据库模式。

## 数据库设计

### 设计方法
### 设计步骤
    - 需求分析
    - 概念结构
    - 逻辑结构
    - 物理结构
    - 数据库实施

## 数据操纵

### 数据定义
### 数据查询
### 数据更新
### 视图
### 触发器
### 存储过程

## 数据库管理系统

### 并发控制
### 数据库恢复技术
### 完整性控制
### 安全性控

---
# 选择题

1. 下述不是 DBA 数据库管理员的职责的是（    ）

- [ ] A.完整性约束说明
- [ ] B.定义数据库模式
- [x] C.数据库管理系统设计
- [ ] D.数据库安全

# 问答题
1. 简述数据、数据库、数据库管理系统、数据库系统的关系。
回答：
- 数据是反映客观事物存在方式和运动状态的记录，是信息的载体。
- 数据库是以一定的组织方式将相关的数据组织在一起，长期存放在计算机内，可为多个用户共享，与应用程序彼此独立，统一管理的数据集合。数据库是数据库系统的核心部分，是数据库系统的管理对象。
- 数据库管理系统是位于用户与操作系统之间，具有数据定义、管理和操纵功能的软件集合。
- 数据库系统是支持数据库得以运行的基础性的系统，即整个计算机系统。
2. 试述关系模型的要素。
回答：
- 关系数据结构：二维表称关系，表中的行称为元组，表中的列称为属性，表中的某个属性或属性组唯一标识一个元组称为码。
- 关系模型的数据操作是集合操作，关系模型的数据操作主要有查询、插入、删除和修改等。
- 关系完整性约束包括实体完整性、参照完整性、用户自定义完整性。

